var Barsortfactory=function(){return function(){"use strict";function r(){return"0.13.0"}function e(r){var e=r.barnum,a=r.scores,t=r.keysbar,u=new Array(t.length),i=r.barppl,s=r.st||0,h=r.ov||a.length,l=h-s,c=r.resolution||5;if(r.secure)return void v(a,e,i,r);var d=o(a,s,h),g=d.minv,p=d.maxv,m=d.mean+4.5*d.sdev,y=d.mean-4.5*d.sdev;isFinite(m)||(m=Number.MAX_VALUE/3),isFinite(y)||(y=-Number.MAX_VALUE/3);var M=c*e,q=M-1;(b.length<M||b.length>M&&x++>k)&&(x=0,b=new Array(M),w=new Array(M),A=new Array(e));for(var N=0;M>N;N++)b[N]=0;var B=-0,F=g,E=p,L=-0;if(p>m&&(L+=m-p),y>g&&(L+=g-y),isFinite(L)&&.1*(p-g)>L){B=(M-1e-7)/(p-g);var U=1/B;F=g+U,E=p-U;for(var V=s;h>V;V++)u[V]=B*(a[V]-g)>>0}else{F=y,E=m,B=(M-2)/(E-F),U=1/B,F-=1.0000001*U;for(var V=s;h>V;V++){var X=B*(a[V]-F);1>X?u[V]=0:X>=q?u[V]=q:u[V]=X>>0}}for(var V=0;M>V;V++)b[V]=0;if(r.descend)for(var V=s;h>V;V++)u[V]=M-u[V]-1;for(var V=s;h>V;V++)b[u[V]]++;var _=.2,j=l/e>>0,z=f(M,j);if(z>M*_){var C=n(h,s,M,a,u,g,p,F,E,B,r.descend,r.lowdiverse);M>C&&(M=C,q=C-1,e=C>>1)}for(var D=l/e,G=0,H=D+.5,I=Math.floor(H),N=0;e>N;N++)A[N]=0;for(var J=0;M>J;J++)for(w[J]=G,A[G]+=b[J];A[G]>=I;)A[G+1]+=A[G]-I,A[G]=I,G++,H+=D-I,I=H>>>0;if(r.arrange){var K=new Array(e);K[0]=0;for(var V=0;e-1>V;V++)K[V+1]=K[V]+A[V];for(var V=s;h>V;V++){for(var O=u[V];0===A[w[O]];)w[O]++;A[w[O]]--,t[K[w[O]]++]=V}}else{if(i)for(var V=0;e>V;V++)i[V]=A[V];for(var V=s;h>V;V++){for(var O=a[V];0===A[w[O]];)w[O]++;A[w[O]]--,t[V]=w[O]}}return A}function n(r,e,n,a,f,o,v,u,i,s,h,l){var c=0,d=0,g=(r-e)/n,p=[],m=[],y=0;t(u,o+1/s)||(p.push(1),m.push(b[y++]));for(var M=b[y++],A=1,w=2*M*.66>>0,x=2*M*1.33>>0,k=b[y],N=n-1;++y<N;){var B=k;M+=B,A++,k=b[y];var F=B+k;if(F>x||w>F){var E=y,L=0,U=0;A>1&&(F>x&&2*B>x||w>F&&w>2*B)&&(L+=B,U++,M-=B,A--,E--),p.push(E),m.push(M);var V=M-(A*g>>0);V>0&&(c+=V,d+=A),M=L,A=U,x=2*(M+k+1)*1.33/(A+1)>>0,w=2*(M+k)*.8/(A+1)>>0}}M+=k,A++,p.push(N),m.push(M);var V=M-(A*g>>0);if(V>0&&(c+=V,d+=A),p.push(n),m.push(b[N]),p.push(0),m.push(0),q)for(var X=0,_=0,j=0;p[X];){m[X];j=_,_=p[X++]}var z=0;if(n*z>c)return n;var C=n;l&&n>50&&(C=42);var D=[],G=[],H=[],I=1/s,J=Math.floor(.99*C-2)/(r-e),K=.5,O=-0,P=-0,Q=0,R=0,S=0,T=0,W=1,Y=(p.length-1,0),Z=-1;t(u,o+1/s)?(Y=0,Z=o,S=0):(m[0]&&(G.push(0),D.push(-(1/0)),H.push(Q++)),Y=1,Z=u,S=1),T=p[Y],W=Y+1,P=Z;var $=0,rr=m[Y],er=rr/(T-S),nr=er,ar=n>>3,tr=0,fr=W,or=p[Y],vr=or,ur=60;R=S;for(var ir=p.length;ir>W;){tr-=$,or+=S-R,$=0,R=S;var sr=T+ar;for(sr=N>sr?sr:N;sr>vr;)tr+=m[fr],vr=p[fr++];var hr=tr/(vr-or),nr=er;do{S=T,$+=rr,rr=m[W],T=p[W++],nr=$/(S-R),er=rr/(T-S);var lr=Math.abs((nr-er)/(nr+er+1));lr*=Math.abs((nr-hr)/(nr+hr+1))+.7,lr*=Math.sqrt(4+T-R)}while(ur>lr&&ir>W);ur*=1.1,O=P,P=u+I*(S-1);var cr=$*J+K;K=cr-(cr=Math.ceil(cr)||1);var dr=(P-O)/cr;D.push(O),H.push(Q),$?(G.push(1/dr),Q+=cr):G.push(0)}G.push(0),D.push(i),H.push(Q++),G.push(0),D.push(NaN),H.push(0);for(var gr=0;C>gr;gr++)b[gr]=0;for(var pr=0,mr=e;r>mr;mr++){for(var yr=1,Mr=a[mr];Mr>=D[yr];)yr++;var br=((Mr-D[--yr])*G[yr]>>0)+H[yr];f[mr]=br,q&&(void 0===b[br]||br>=n||0>br)&&pr++}if(h){C--;for(var mr=e;r>mr;mr++)f[mr]=C-f[mr];C++}for(var Ar=0,mr=e;r>mr;mr++)q&&Ar<f[mr]&&(Ar=f[mr]),b[f[mr]]++;return q&&b.length>n,C}function a(r){for(var e,n,a,t=r.length,f=0,o=Math.floor(r.length/10),v=r[0];++f<t;)if(r[f]!==v){e=r[f];break}for(;++f<t;)if(r[f]!==v&&r[f]!==e){n=r[f];break}for(;++f<t;)if(r[f]!==v&&r[f]!==e&&r[f]!==n){a=r[f];break}for(;++f<t&&(r[f]===v||r[f]===e||r[f]===n||r[f]===a||0!=--o););return f>=t}function t(r,e){return 7.5*r/e>>0==7}function f(r,e){for(var n=0,a=b[0]+b[1],t=2;r>t;t++){a+=b[t];var f=a-e;f>0&&(n+=f*f,a-=f),a-=b[t-2],a=0>a?0:a}return Math.sqrt(n)>>0}function o(r,e,n){for(var a=r[e],t=a,f=0,o=-0,v=-0,u=-0,i=-0,s=-0,h=e;n>h;h++){if(o=r[h]||-0,o>=t){if(t=o,o===1/0)continue}else if(a>=o&&(a=o,o===-(1/0)))continue;f++,v=o-i,i+=v/f,u=o-i,s+=v*u}var l=f>1?Math.sqrt(s/(f-1)):0;return{minv:a,maxv:t,sdev:l,mean:i}}function v(r,e,n,a){var t=s(r,a.descend,[],0,0);if(a.arrange)return t;for(var f=(ov-st)/e,o=0,n=n||[],v=0;e>v;v++)n[v]=0;for(var u=0,i=t.length;i>u;u++)if(t[u]>=st&&t[u]<ov){var h=Math.round(o++/f);kysbar[t[u]]=h,n[h]++}}function u(r,e){return e>r}function i(r,e){return r>e}function s(r,n,t,f,o){var v=!1,s=r.length,c=10,g=!1,p=!1;if(!f&&s>c){for(var m,y=0,b=0,A=h(s>>>5,c),w=m=r[0],x=Math.ceil(.1+s/(8*A)),k=s-x*A;s>k;k+=x)w=m,m=r[k],w>m&&y++,m>w&&b++;var q=(y-b)/A;n&&(q=-q);var N=.3;q>N&&(v=!0),3*y>A&&3*b>A?g=!0:p=a(r)}t&&t.length>=s||(t=l(r,v)),M=n?u:i;if(!(f||p||g&&s>80)){var B=Math.ceil(s/1e4)+2;if(d(r,t,B))return t}var F=14,E=2;r.length<15e5&&(F=10),r.length<3e5&&(F=6);var L=Math.ceil(r.length/F)+1;t=t||new Array(s);e({barnum:L,scores:r,keysbar:t,savscore:1,resolution:E,descend:n,secure:!1,arrange:!0,lowdiverse:p});return o?t:(B=15e7,d(r,t,B),t)}function h(r,e,n){return e>r?e:r>n?n:r}function l(r,e){var n=new Array(r.length);if(e)for(var a=0,t=n.length,f=t;t>a;a++)n[a]=--f;else for(var a=0,t=n.length;t>a;a++)n[a]=a;return n}function c(r,e,n){if(!n||n.length<r.length){n=new Array(r.length);for(var a=0,t=r.length;t>a;a++)n[a]=a}return M=e?u:i,d(r,n,25e7),n}function d(r,e,n){var a,t,f=r.length,o=n*(f+1e4),v=30,u=250,i=[0],s=0,l=1e3,c=500,d=h(150,0,f),m=d;for(g(r,e,1,d,0);f>m;){if(a=h(m+u,0,f),t=g(r,e,m,a,m-v)){a-s>l&&(s+=c);var y=p(r,e,m-v,a,s);if(o-=Math.sqrt(t)*y,0>o)return!1;y>s-(m-v)&&i[i.length-1]!==s&&i.push(s)}o+=n,m=a}if(i.length>1)for(var M,b,A,w=1,x=i[0],k=i.length-1,q=i.length;k;){for(;0===i[w];)w++;if(w>=q)break;for(M=x,b=i[w],i[w]=0;0===i[w];)w++;x=q>w?i[w]:f,A=w++;for(var y=p(r,e,b,x,M);0===i[w];)w++;if(A!==q){x=q>w?i[w++]:f,b=i[A],i[A]=0;var y=p(r,e,b,x,M)}for(;0===i[w];)w++;w>=q&&(x=0,w=0)}return m===f}function g(r,e,n,a,t){for(var f=0,o=0,v=0,u=0,i=n+2*(a-n>>>1),s=n,h=n+1;i>h;){for(f=s-1,o=e[s],M(r[o],r[e[h]])&&(e[s]=e[h],e[h]=o,o=e[s]),v=e[h];f>=t&&M(r[e[f]],r[v]);)e[f+2]=e[f],f--;for(t>f&&u++,e[f+2]=v;f>=t&&M(r[e[f]],r[o]);)e[f+1]=e[f],f--;t>f&&u++,e[f+1]=o,s+=2,h+=2}if(i!==a){for(o=e[a-1],f=a-2;f>=t&&M(r[e[f]],r[o]);)e[f+1]=e[f],f--;t>f&&u++,e[f+1]=o}return u}function p(r,e,n,a,t){a-n>N.length&&(N=new Array(h(3*(a-n),0,r.length)));for(var f=0,o=n,v=a-n;v>f;)N[f++]=e[o++];for(var u=a-1,i=a-n-1,s=n-1,l=s;i>=0&&!M(r[e[s]],r[N[i]]);)i--,u--;for(;i>=0;){for(l=s;s>=t&&M(r[e[s]],r[N[i]]);)s--;for(var c=l,d=c+u-l;c>s;)e[d--]=e[c--];u-=l-s,e[u]=N[i],u--,i--}return t>u?n-u+1:n-u}function m(r,e){for(var n=new Array(r.length),a=0,t=e.length;t>a;a++)n[a]=r[e[a]];return r=n}function y(r,e){return m(r,s(r,e))}var M,b=[],A=[],w=[],x=0,k=10,q=0,N=[];return{barassign:e,sortorder:s,sort:y,reorder:m,longsort:d,stndindex:c,longindex:c,insertndx:g,version:r}}()},mdname="Barsort",facfnc=Barsortfactory;"undefined"!=typeof exports?"undefined"!=typeof module&&module.exports?exports=module.exports=facfnc({}):exports[mdname]=facfnc({}):"function"==typeof define&&define.amd?define(mdname,[],function(){return facfnc({})}):(0,eval)("this")[mdname]=facfnc({});